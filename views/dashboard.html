<html>
    <head>
        <title>Dash Board</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        
    </head>
    <body>
        <!-- NAVBAR STARTS -->

      <nav class="navbar navbar-expand-lg site-header sticky-top py-1"  style= "background-color: #f4eeff">
     
        <div class="container d-flex flex-column flex-md-row justify-content-between">
          <a class="py-2" href="/" aria-label="Product">
            <svg xmlns="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSvPFOw1bQ5mtMPkEn_iUwLcSGFksFHEq9BAA&usqp=CAU" width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="d-block mx-auto" role="img" viewBox="0 0 25 25" focusable="false">
        <title>Logo</title>
        <circle cx="12" cy="12" r="11"/>
        <path xmlns="https://i.pinimg.com/originals/4a/8a/f3/4a8af3d932e3d5b4f83f6bdd99e45e3b.png"/>
            </svg>
          </a>
          <a class="py-2 d-none d-md-inline-block" href="/register"> Register </a>
          <a class="py-2 d-none d-md-inline-block" href="/"> Meet our team </a>
          <a class="py-2 d-none d-md-inline-block" href="/logout"> Logout </a>

        </div>
      </nav>

      <!-- NAVBAR ENDS -->
        <div style="margin-top: 40;">
        <div class="container">
            <h3 id="heading">Welcome <span id="user">User</span> </h3>
            
            <h5>Enter SPI for &nbsp; 
                <select name="sem" id="1sem">
                    <option value="">--select--</option>
                    <option value="1">Sem 1</option>
                    <option value="2">Sem 2</option>
                    <option value="3">Sem 3</option>
                    <option value="4">Sem 4</option>
                    <option value="5">Sem 5</option>
                    <option value="6">Sem 6</option>
                    <option value="7">Sem 7</option>
                    <option value="8">Sem 8</option>
                </select>  : 
                <input type="number" id='spi'>
                <button type="button" class="btn btn-primary" id="submit_spi"> Submit </button>
            </h5>

            <button type="button" class="btn btn-primary" id='marks'>Enter marks</button><br><br>
            <!-- <button type="button" class="btn btn-primary" id='chart'>View Charts</button> -->
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  View Sessional Charts
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" id="sess_chart1">Sem 1</a>
                    <a class="dropdown-item" id='sess_chart2'>Sem 2</a>
                    <a class="dropdown-item" id='sess_chart3'>Sem 3</a>
                    <a class="dropdown-item" id='sess_chart4'>Sem 4</a>
                    <a class="dropdown-item" id='sess_chart5'>Sem 5</a>
                    <a class="dropdown-item" id='sess_chart6'>Sem 6</a>
                    <a class="dropdown-item" id='sess_chart7'>Sem 7</a>
                    <a class="dropdown-item" id='sess_chart8'>Sem 8</a>
                </div>
            </div>
            <br>
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  View External Charts
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                    <a class="dropdown-item" id="ext_chart1">Sem 1</a>
                    <a class="dropdown-item" id='ext_chart2'>Sem 2</a>
                    <a class="dropdown-item" id='ext_chart3'>Sem 3</a>
                    <a class="dropdown-item" id='ext_chart4'>Sem 4</a>
                    <a class="dropdown-item" id='ext_chart5'>Sem 5</a>
                    <a class="dropdown-item" id='ext_chart6'>Sem 6</a>
                    <a class="dropdown-item" id='ext_chart7'>Sem 7</a>
                    <a class="dropdown-item" id='ext_chart8'>Sem 8</a>
                </div>
            </div>
            <br>
            <button type="button" class="btn btn-primary" id='sem_wise'>View Semester-wise progress</button><br><br>

            <button type="button" class="btn btn-primary" id='sem_avg'>View Semester-wise average</button><br><br>
            
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  View Sessional-wise average
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                    <a class="dropdown-item" id="each_sess_avg1">Sem 1</a>
                    <a class="dropdown-item" id='each_sess_avg2'>Sem 2</a>
                    <a class="dropdown-item" id='each_sess_avg3'>Sem 3</a>
                    <a class="dropdown-item" id='each_sess_avg4'>Sem 4</a>
                    <a class="dropdown-item" id='each_sess_avg5'>Sem 5</a>
                    <a class="dropdown-item" id='each_sess_avg6'>Sem 6</a>
                    <a class="dropdown-item" id='each_sess_avg7'>Sem 7</a>
                    <a class="dropdown-item" id='each_sess_avg8'>Sem 8</a>
                </div>
            </div>
            
        </div>
        </div>
        <!-- footer-->
      
      <footer class="blog-footer" style="text-align:center; background-color: #beebe9; position: absolute; bottom: 0; width: 100%;">
        <p>Thank you      <a href="/">   Resino    </a> by   <a href="www.csi.ac.in">  @csi  </a>  . </p>
        <p>
          <a href="#">Back to top</a>
        </p>
      </footer>
      
      <!-- footer ends-->
    </body>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $(document).ready( function(){
            $("#submit_spi").click(function(){
                // console.log(document.getElementById("sem").value)
                // console.log(document.getElementById("spi").value)
                if (document.getElementById('1sem').value=="" )
                    alert("Select semester")
                else if (document.getElementById("spi").value=="" )
                    alert("Enter valid input")
                else if (document.getElementById("spi").value<0 || document.getElementById("spi").value>10 )
                    alert("Enter valid SPI");
                else
                {
                    // console.log( document.getElementById("spi").value + " " +  document.getElementById("1sem").value )
                    let param = new URLSearchParams(window.location.search)
                    $.ajax({
                        type: "POST",
                        url: "http://localhost:3000/add_spi",
                        data: {
                            ID : param.get("ID"),
                            sem : document.getElementById("1sem").value,
                            spi : document.getElementById("spi").value
                        },
                        success: function(result){
                            console.log(JSON.stringify(result));
                            alert("SPI added")
                        },
                        failure: function(err){
                            console.log(err);
                        }
                    })
                }
            })
        })
    </script>
    <script>
        $(document).ready( function(){
            let param = new URLSearchParams(window.location.search)
            var branch
            $.ajax({
                type: "GET",
                url: "http://localhost:3000/current_user?ID="+param.get('ID'),
                success: function(result){
                    if (result.length > 0)
                    {
                        console.log(result[0])
                        document.getElementById("user").innerHTML = result[0].name
                        branch = result[0].branch
                    }
                    else
                    {
                        console.log("user not registered")
                        window.location.href = '/login'
                    }
                }
            })

            $("#marks").click(function(){
                console.log("btn clicked")
                window.location.href = "/enter_marks"
            })
            $("#sess_chart1").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=1"
            })
            $("#sess_chart2").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=2"
            })
            $("#sess_chart3").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=3"
            })
            $("#sess_chart4").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=4"
            })
            $("#sess_chart5").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=5"
            })
            $("#sess_chart6").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=6"
            })
            $("#sess_chart7").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=7"
            })
            $("#sess_chart8").click(function(){
                console.log("btn clicked")
                window.location.href = "/sess_charts?sem=8"
            })
            $("#ext_chart1").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=1"
            })
            $("#ext_chart2").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=2"
            })
            $("#ext_chart3").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=3"
            })
            $("#ext_chart4").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=4"
            })
            $("#ext_chart5").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=5"
            })
            $("#ext_chart6").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=6"
            })
            $("#ext_chart7").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=7"
            })
            $("#ext_chart8").click(function(){
                console.log("btn clicked")
                window.location.href = "/ext_charts?sem=8"
            })
            $("#sem_wise").click(function(){
                console.log("btn clicked")
                window.location.href = "/sem_wise?ID=" + param.get('ID')
            })
            $("#sem_avg").click(function(){
                console.log("btn clicked")
                window.location.href = "/sem_avg?ID=" + param.get('ID') + "&branch=" + branch
            })

            $("#each_sess_avg1").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=1&branch=" + branch
            })
            $("#each_sess_avg2").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=2&branch=" + branch
            })
            $("#each_sess_avg3").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=3&branch=" + branch
            })
            $("#each_sess_avg4").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=4&branch=" + branch
            })
            $("#each_sess_avg5").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=5&branch=" + branch
            })
            $("#each_sess_avg6").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=6&branch=" + branch
            })
            $("#each_sess_avg7").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=7&branch=" + branch
            })
            $("#each_sess_avg8").click(function(){
                console.log("btn clicked")
                window.location.href = "/each_sess_avg?ID=" + param.get('ID') + "&sem=8&branch=" + branch
            })
        })
    </script>

</html>